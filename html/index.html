<html>
<head>
<meta name="author"             content="ndevilla@free.fr">
<meta name="editor"             content="ndevilla@free.fr">
<meta name="maintainer"         content="ndevilla@free.fr">
<meta name="keywords"           content="gnuplot, interface, ANSI C">
<link href="doxygen.css" rel="stylesheet" type="text/css">
<title>gnuplot_i 2.x</title>
</head>

<body text="#000000" bgcolor="#ffffff">

<!-- Generated by Doxygen 1.2.17 -->
<h1>gnuplot_i reference Manual</h1>
<p>
<h3 align="center">2.x</h3>
<p>
<h2><a name="intro">Introduction</a>
</h2>
<p>
gnuplot_i (formerly known as gnuplot_pipes) is yet another attempt to provide a programmer-friendly set of routines to use gnuplot as a data displayer from a C program. Looking into the code, you will see that it is actually talking to gnuplot through a Unix pipe (ports to Windows involve simulating a Unix pipe as well), instead of using a kind of API to gnuplot's plotting features.
<p>
Why is that so? Simply because gnuplot has not been programmed with a C API in mind, but to be an interactive plotting program. There have been several attempts at trying to extract a set of communication functions to the core plotting engine, without success. Your best bet is to talk to a gnuplot session as you would type commands on the keyboard. This command interface is clearly defined, hard to get wrong, and offers all the functionalities you have in gnuplot. The only drawback is that since a Unix pipe is unidirectional, it is very hard to get an error status back from gnuplot. gnuplot_i is only implementing this thin layer around the pipe, with no error reporting.
<p>
The idea of talking to a gnuplot session through a pipe is not new, various implementations have been circulating on the Usenet since a while. gnuplot_i is only a factorization of the best efforts seen so far to achieve such an interface, it is nothing particularly original or fancy. gnuplot_i is placed in the public domain in the hope that it can be useful to somebody. Thanks to the many contributors for bug reports, suggestions and additional code!
<p>
<h2><a name="ref">Reference</a>
</h2>
<p>
You can browse here the reference documentation for the two source files:
<p>
<ul>
<li><a class="el" href="gnuplot__i_8c.html">gnuplot_i.c</a><li><a class="el" href="gnuplot__i_8h.html">gnuplot_i.h</a></ul>
<h2><a name="install">Installing gnuplot_i</a>
</h2>
<p>
Follow these steps to compile the module:
<p>
<ul>
<li>Edit the Makefile to indicate the C compiler you want to use, the options to provide to compile ANSI C. If you want to use gcc, you have nothing to change.<li>Type make to make <code>gnuplot_i.o</code>.<li>Type make tests to make the test programs.<li>Type 'test/anim' or 'test/example' to get an overview of the possibilities offered by this module.</ul>
To use the module in your programs, add the following line on top of your module:
<p>
<div class="fragment"><pre><span class="preprocessor">    #include "<a class="code" href="gnuplot__i_8h.html">gnuplot_i.h</a>"</span>
</pre></div>
<p>
And link your program against the gnuplot_i module by adding <code>gnuplot_i.o</code> to the compile line.
<p>
See the files test/anim.c and test/example.c for examples.
<p>
<h2><a name="tuto">Tutorial</a>
</h2>
<p>
The procedure to follow to display graphics in a gnuplot session is:
<p>
<h3><a name="tuto1">Open a new session</a>
</h3>
<p>
Open a new gnuplot session, referenced by a handle of type (pointer to) gnuplot_ctrl. This is done by calling <a class="el" href="gnuplot__i_8c.html#a1">gnuplot_init</a>():
<p>
<div class="fragment"><pre>    <a class="code" href="struct__GNUPLOT__CTRL__.html">gnuplot_ctrl</a> * h ;
    h = <a class="code" href="gnuplot__i_8c.html#a1">gnuplot_init</a>() ;
</pre></div>
<p>
<code>h</code> will be used as the handle to the gnuplot session which was just opened, by all further functions.
<p>
Notice that the default behaviour of gnuplot_i is to check for the presence of an environment variable called DISPLAY, which is mandatory under X11 to display with gnuplot. If the module cannot found any DISPLAY variable in the environment, you get a warning on <code>stderr</code>.
<p>
<h3><a name="tuto2">Send optional configuration commands</a>
</h3>
<p>
Send optionally display configuration orders. The following functions are available:
<p>
<ul>
<li><a class="el" href="gnuplot__i_8c.html#a4">gnuplot_setstyle</a>() sets the plotting style of the next plots<li><a class="el" href="gnuplot__i_8c.html#a5">gnuplot_set_xlabel</a>() sets the X label for the next plots<li><a class="el" href="gnuplot__i_8c.html#a6">gnuplot_set_ylabel</a>() sets the Y label for the next plots</ul>
Examples:
<p>
<div class="fragment"><pre>    <a class="code" href="gnuplot__i_8c.html#a4">gnuplot_setstyle</a>(h, <span class="stringliteral">"impulses"</span>) ;
    <a class="code" href="gnuplot__i_8c.html#a5">gnuplot_set_xlabel</a>(h, <span class="stringliteral">"my X label"</span>) ;
    <a class="code" href="gnuplot__i_8c.html#a5">gnuplot_set_xlabel</a>(h, <span class="stringliteral">"my Y label"</span>) ;
</pre></div>
<p>
The most useful routine is probably <a class="el" href="gnuplot__i_8c.html#a3">gnuplot_cmd</a>(), which allows you to send character strings to gnuplot as though they were typed in by a user. This routine works in a printf fashion, accepting the same kind of format string and variable number of arguments. The prototype is:
<p>
<div class="fragment"><pre>    <a class="code" href="gnuplot__i_8c.html#a3">gnuplot_cmd</a>(handle, command, ...)
</pre></div>
<p>
Example:
<p>
<div class="fragment"><pre>    <span class="keywordtype">char</span> myfile[] = <span class="stringliteral">"/data/file_in.dat"</span> ;
    <span class="keywordtype">int</span>  i ;
    
    <a class="code" href="gnuplot__i_8c.html#a3">gnuplot_cmd</a>(handle, <span class="stringliteral">"plot '%s'"</span>, myfile);
    <span class="keywordflow">for</span> (i=0 ; i&lt;10 ; i++) {
        <a class="code" href="gnuplot__i_8c.html#a3">gnuplot_cmd</a> (handle, <span class="stringliteral">"plot y=%d*x"</span>, i);
    }
</pre></div>
<p>
The following commands request the output to be done to a postscript file named 'curve.ps':
<p>
<div class="fragment"><pre>    <a class="code" href="gnuplot__i_8c.html#a3">gnuplot_cmd</a>(h, <span class="stringliteral">"set terminal postscript"</span>) ;
    <a class="code" href="gnuplot__i_8c.html#a3">gnuplot_cmd</a>(h, <span class="stringliteral">"set output \"curve.ps\""</span>) ;
</pre></div>
<p>
Using <a class="el" href="gnuplot__i_8c.html#a3">gnuplot_cmd</a>(), it should be fairly easy to add up some more configuration-related functions whenever needed.
<p>
<h3><a name="tuto3">Send display commands</a>
</h3>
<p>
Send some display orders: either functions or doubles, or double points. The following functions are available:
<p>
<ul>
<li><a class="el" href="gnuplot__i_8c.html#a11">gnuplot_plot_slope</a>() to display a slope<li><a class="el" href="gnuplot__i_8c.html#a12">gnuplot_plot_equation</a>() to display an equation<li><a class="el" href="gnuplot__i_8c.html#a8">gnuplot_plot_x</a>() to display user-defined 1d data with a single variable. Input is a list of values, assumed regularly spaced on the X-axis.<li><a class="el" href="gnuplot__i_8c.html#a9">gnuplot_plot_xy</a>() to display user-defined 1d data with two variables. Provide x and y through two arrays of doubles.<li><a class="el" href="gnuplot__i_8c.html#a7">gnuplot_resetplot</a>() requests the current gnuplot display to be cleared before next display is done.</ul>
<h3><a name="tuto4">Close the session</a>
</h3>
<p>
Close the gnuplot session by calling gnuplot_close on the session handle. This is very important, since otherwise all temporary files will NOT be cleaned for /tmp and /var/tmp.
<p>
<div class="fragment"><pre>    <a class="code" href="gnuplot__i_8c.html#a2">gnuplot_close</a>(h) ;
</pre></div>
<p>
See examples of gnuplot_i use in the provided files 'example.c' and 'anim.c'.
<p>
<h2><a name="misc">Some more points before you start using gnuplot_i</a>
</h2>
<p>
gnuplot_i is completely free software. Use it for whatever you want to do with it without any fee, and do not hesitate to send feedback to me if you wish: <em>ndevilla@free.fr</em>
<p>
If you can do it, I would appreciate a mention somewhere that you are using 'gnuplot_i' in your application. Something like:
<p>
<em> "This software uses the gnuplot_i library written by N.Devillard" </em>
<p>
If you are using gnuplot_i for a web-based application, you can also add a link to the gnuplot home page: <a href="http://ndevilla.free.fr/gnuplot/">http://ndevilla.free.fr/gnuplot/</a>
<p>
If you are so happy about this piece of code that you would like to fund more stuff like that, do not hesitate to send me cash :<code>-)</code>
<p>
Notice that it is possible to open several gnuplot sessions from the same program. Just be careful then to which session you are talking when using functions. Example:
<p>
<div class="fragment"><pre>    h1 = <a class="code" href="gnuplot__i_8c.html#a1">gnuplot_init</a>() ;
    h2 = <a class="code" href="gnuplot__i_8c.html#a1">gnuplot_init</a>() ;

    <a class="code" href="gnuplot__i_8c.html#a12">gnuplot_plot_equation</a>(h1, <span class="stringliteral">"sin(x)"</span>, <span class="stringliteral">"sine on first session"</span>);
    <a class="code" href="gnuplot__i_8c.html#a12">gnuplot_plot_equation</a>(h2, <span class="stringliteral">"log(x)"</span>, <span class="stringliteral">"log on second session"</span>) ;
    sleep(3) ;
    <a class="code" href="gnuplot__i_8c.html#a2">gnuplot_close</a>(h1) ;
    <a class="code" href="gnuplot__i_8c.html#a2">gnuplot_close</a>(h2) ;
</pre></div>
<p>
Never forget to close opened sessions! This would leave some temporary files. Hopefully, your temporary directories should be cleaned automatically every now and then, but best is simply not to forget to close all windows before leaving the house.
<p>
User interactions are not part of gnuplot_i. Feel free to use your own.
<p>
No timing mechanisms are provided to leave the outputs on screen until e.g. a key is pressed. I leave it up to gnuplot_i users to provide that kind of functionality in their own application, depending on the kind of interaction they need.
<p>
No programming so far of 'splot' related commands. Should you implement some, I would recommend making use of the 'plot' related commands as a canvas.
<p>
<h2><a name="example">Example: generating web plots on the fly</a>
</h2>
<p>
gnuplot can be used to generate PNG images of plots instead of plotting to a normal window session. This requires to have linked your version of gnuplot against the PNG library (freely available). Look up the gnuplot documentation about PNG support.
<p>
The procedure is simple: open a new session, set the terminal type to PNG, set the output file name, and plot your data. Close the session, you are done. This translates to something like:
<p>
<div class="fragment"><pre>    <a class="code" href="struct__GNUPLOT__CTRL__.html">gnuplot_ctrl</a> * g = <a class="code" href="gnuplot__i_8c.html#a1">gnuplot_init</a>();

    <a class="code" href="gnuplot__i_8c.html#a3">gnuplot_cmd</a>(g, <span class="stringliteral">"set terminal png"</span>);
    <a class="code" href="gnuplot__i_8c.html#a3">gnuplot_cmd</a>(g, <span class="stringliteral">"set output \"sine.png\""</span>);
    <a class="code" href="gnuplot__i_8c.html#a12">gnuplot_plot_equation</a>(g, <span class="stringliteral">"sin(x)"</span>, <span class="stringliteral">"Sine wave"</span>);
    <a class="code" href="gnuplot__i_8c.html#a2">gnuplot_close</a>(g);
</pre></div>
<p>
You can also find this example in the source distribution, in the file sinepng.c.
<p>

<hr>
Last modified: Mon Jan 27 10:00:38 2003
</hr>
</body>
</html>
